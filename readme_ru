HVKAPI 0.3 README FILE
================================================================================
HVKAPI - модуль для работы с API вконтакта, для языков Perl и PHP, не имеющих
поддержки визуальных компонентов. 

Начиная с версии 0.3, модуль предоставляет интерфейс для обычных HTTP-запросов к
контакту через объект LWP::UserAgent, наряду с запросами через API. Обработку 
капчи этот интерфейс поддерживает (метод postWithCaptcha), но имейте в виду, что
определение капчи (как и, например, функция логина) могут рушиться всякий раз,
когда контакт изменит формат капчи или сам логин. Это - плата за избавление от 
визуальных компонентов. 


ОПИСАНИЕ МЕТОДОВ
--------------------------------------------------------------------------------

~~~~~~~~~~~~~~~~~~~~~~~~~
new (appid, useragent, captchaCallback)
~~~~~~~~~~~~~~~~~~~~~~~~~
Конструктор класса. В качестве параметров принимает:
 - appid (int)- ид десктопного приложения, через которое будут идти запросы
 - UserAgent (string)- идентификатор браузера, без комментариев.
 - captchaCallback (pointer) - callback-функция для обработки возможной капчи.

~~~~~~~~~~~~~~~~~~~~~~~~~
login (email, pass)
~~~~~~~~~~~~~~~~~~~~~~~~~
Собственно логин. Параметры очевидны. Возвращаемый результат - хеш (в Perl) или 
ассоциативный массив (в PHP) с ключами:
	errcode - код ошибки.
	errdesc - описание ошибки. 
В случае успешного логина errcode = 0. Возможные коды ошибок:
	101 (ERROR_LOGIN) - некорректный логпасс.
	102 (ERROR_SECURITY) - бан по айпишнику, "проверка безопасности"
	666 (ERROR_CAPTCHA) - вылезла капча (и вы не указали callback)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
setCallback (callbackFunc)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Устанавливает (или заменяет) callback-функцию для капчи. В PHP на вход ваша 
callback-функция получает ассоциативный массив из следующих полей:
	difficult - т.н. сложность капчи (поле [b]s[/b] в адресе)
	captcha_sid - sid капчи. 
	captcha_url - полный линк на картинку с капчей, например, 
			http://vkontakte.ru/captcha.php?sid=1234567890&s=0
В Perl - ССЫЛКУ на хеш, поля те же. Вернуть она должна строку ответа. 

~~~~~~~~~~~~~~~~~~~~~~~~~
request (method, params)
~~~~~~~~~~~~~~~~~~~~~~~~~
Запрос к API вконтакта.
 - method (string) - название метода API.
 - params - хеш (в Perl) или ассоциативный массив (в PHP) с полями запроса. 
Возвращает также хеш либо ассоциативный массив. Подробнее о входных параметрах 
и кодах ошибок см. документацию на userapi.com.

~~~~~~~~~~~~~~~~~~~~~~~~~
interface()
~~~~~~~~~~~~~~~~~~~~~~~~~
Объект LWP::UserAgent для HTTP-запросов (только с версии 0.3!)

~~~~~~~~~~~~~~~~~~~~~~~~~
postWithCaptcha()
~~~~~~~~~~~~~~~~~~~~~~~~~
Post через LWP::UserAgent, только с обработкой капчи. (только с версии 0.3!)


КОНСТАНТЫ И ЗНАЧЕНИЯ ПО УМОЛЧАНИЮ
--------------------------------------------------------------------------------
Расположены в начале модуля с классом и прокомментированы. Можно изменить ид 
дефолтного приложения, юзерагент, адрес для API-запросов и вообще поломать 
модуль и долго на это жаловаться.

